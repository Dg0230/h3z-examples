# H3z Examples

[![Zig](https://img.shields.io/badge/Zig-0.14+-orange.svg)](https://ziglang.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![Build Status](https://img.shields.io/badge/build-passing-brightgreen.svg)]()

å…¨é¢çš„ç¤ºä¾‹å’Œæ¼”ç¤ºï¼Œçµæ„Ÿæ¥è‡ª [H3z](https://github.com/Dg0230/h3z) HTTP æ¡†æ¶ã€‚æœ¬ä»“åº“å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Zig æ„å»ºå¿«é€Ÿã€è½»é‡ä¸”å¯ç»„åˆçš„ HTTP æœåŠ¡å™¨ï¼ŒåŒ…å«å„ç§æ¨¡å¼ã€ä¸­é—´ä»¶æ”¯æŒå’Œç”Ÿäº§çº§ç‰¹æ€§ã€‚

> **æ³¨æ„**ï¼šæœ¬é¡¹ç›®åŒ…å«ä¸€ä¸ªç®€åŒ–çš„ H3z å…¼å®¹ API å®ç°ï¼Œç”¨äºæ¼”ç¤ºç›®çš„ã€‚å½“ H3z å˜å¾—ç¨³å®šåï¼Œè¿™äº›ç¤ºä¾‹å¯ä»¥è½»æ¾è¿ç§»åˆ°å®˜æ–¹ H3z åº“ã€‚

## âœ¨ ä½ å°†å­¦åˆ°ä»€ä¹ˆ

- **ç°ä»£ Zig å¼€å‘**ï¼šæ¢ç´¢ Zig 0.14+ ç‰¹æ€§å’Œæœ€ä½³å®è·µ
- **H3z æ¡†æ¶ç²¾é€š**ï¼šä½¿ç”¨ H3z HTTP æ¡†æ¶çš„å®Œæ•´ç¤ºä¾‹
- **HTTP æœåŠ¡å™¨æ¨¡å¼**ï¼šç†è§£ä¸åŒçš„æœåŠ¡å™¨æ¶æ„å’Œæ¨¡å¼
- **ä¸­é—´ä»¶ç³»ç»Ÿ**ï¼šäº†è§£å¦‚ä½•ä¸ºå®é™…åº”ç”¨æ„å»ºå’Œé“¾æ¥ä¸­é—´ä»¶
- **API å¼€å‘**ï¼šå­¦ä¹ æ„å»ºå…·æœ‰é€‚å½“é”™è¯¯å¤„ç†çš„ RESTful API
- **å®‰å…¨æœ€ä½³å®è·µ**ï¼šå®ç°å®‰å…¨å¤´ã€CORS å’Œèº«ä»½éªŒè¯

## ğŸ“š åŒ…å«çš„ç¤ºä¾‹

æœ¬ä»“åº“åŒ…å«å¤šä¸ªå…¨é¢çš„ç¤ºä¾‹ï¼š

### 1. åŸºç¡€æœåŠ¡å™¨ (`basic_server.zig`)
- ç®€å•çš„ HTTP æœåŠ¡å™¨è®¾ç½®
- åŸºæœ¬è·¯ç”±å’Œå¤„ç†ç¨‹åº
- è¯·æ±‚/å“åº”å¤„ç†
- HTML å’Œ JSON å“åº”

### 2. å¤šæ¨¡å¼æœåŠ¡å™¨ (`multi_mode_server.zig`)
- **åŸºæœ¬æ¨¡å¼**ï¼šå¼€å‘çš„é»˜è®¤é…ç½®
- **å®‰å…¨æ¨¡å¼**ï¼šå…·æœ‰å®‰å…¨ç‰¹æ€§çš„ç”Ÿäº§å°±ç»ªé…ç½®
- **å¼€å‘æ¨¡å¼**ï¼šå¯ç”¨ CORSï¼Œå®½æ¾è®¾ç½®
- å‘½ä»¤è¡Œæ¨¡å¼åˆ‡æ¢

### 3. ä¸­é—´ä»¶ç¤ºä¾‹ (`middleware_example.zig`)
- è‡ªå®šä¹‰ä¸­é—´ä»¶å®ç°
- å†…ç½®ä¸­é—´ä»¶ä½¿ç”¨
- ä¸­é—´ä»¶é“¾æ¥
- è¯·æ±‚/å“åº”ä¿®æ”¹

### 4. é«˜çº§è·¯ç”± (`advanced_routing.zig`)
- ä» URL æå–å‚æ•°
- é€šé…ç¬¦è·¯ç”±
- æ–‡ä»¶ä¸Šä¼ å¤„ç†
- èº«ä»½éªŒè¯ä¸­é—´ä»¶
- é”™è¯¯å¤„ç†æ¨¡å¼

### 5. REST API (`rest_api.zig`)
- å®Œæ•´çš„ CRUD æ“ä½œ
- JSON è¯·æ±‚/å“åº”å¤„ç†
- æ•°æ®éªŒè¯
- é”™è¯¯å“åº”
- API ç‰ˆæœ¬æ§åˆ¶

## ğŸš€ å±•ç¤ºçš„ç‰¹æ€§

- **é«˜æ€§èƒ½æ¶æ„** - åŸºäº H3z çš„è½»é‡å¿«é€Ÿæ ¸å¿ƒ
- **å¤šç§æ“ä½œæ¨¡å¼** - åŸºæœ¬ã€å®‰å…¨å’Œå¼€å‘é…ç½®
- **ä¸­é—´ä»¶ç³»ç»Ÿ** - å…¨å±€å’Œè·¯ç”±ç‰¹å®šçš„ä¸­é—´ä»¶æ”¯æŒ
- **å®‰å…¨ç‰¹æ€§** - CORSã€å®‰å…¨å¤´ã€èº«ä»½éªŒè¯
- **ç°ä»£ Zig æ¨¡å¼** - ç±»å‹å®‰å…¨ã€å†…å­˜å®‰å…¨çš„å®ç°

## ğŸ“¦ å®‰è£…å’Œæ„å»º

### å‰ææ¡ä»¶

- Zig 0.14.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- ç½‘ç»œè¿æ¥ï¼ˆç”¨äºä¸‹è½½ä¾èµ–é¡¹ï¼‰

### æ„å»ºé¡¹ç›®

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/h3z-examples.git
cd h3z-examples

# æ„å»ºæ‰€æœ‰ç¤ºä¾‹
zig build

# è¿è¡Œæµ‹è¯•
zig build test
```

## ğŸ¯ è¿è¡Œç¤ºä¾‹

### åŸºç¡€æœåŠ¡å™¨
```bash
zig build basic
# æˆ–è€…
zig build run
```
- ç«¯å£ï¼š3000
- ç®€å•çš„è·¯ç”±å’Œå¤„ç†ç¨‹åº

### å¤šæ¨¡å¼æœåŠ¡å™¨
```bash
# åŸºæœ¬æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
zig build multi

# å®‰å…¨æ¨¡å¼
zig build multi -- --mode=secure

# å¼€å‘æ¨¡å¼
zig build multi -- --mode=dev
```

### ä¸­é—´ä»¶ç¤ºä¾‹
```bash
zig build middleware
```

### é«˜çº§è·¯ç”±
```bash
zig build advanced
```

### REST API
```bash
zig build api
```

## ğŸ“š API ç«¯ç‚¹

### åŸºç¡€æœåŠ¡å™¨ç«¯ç‚¹

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|--------|------|-------------|
| GET | `/` | å¸¦æœ‰ HTML ç•Œé¢çš„ä¸»é¡µ |
| GET | `/hello/:name` | ä¸ªæ€§åŒ–é—®å€™ |
| POST | `/api/echo` | å›æ˜¾è¯·æ±‚ä½“ |
| GET | `/api/status` | æœåŠ¡å™¨çŠ¶æ€ |

### å¤šæ¨¡å¼æœåŠ¡å™¨ç«¯ç‚¹

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|--------|------|-------------|
| GET | `/` | æ¨¡å¼ç‰¹å®šçš„ä¸»é¡µ |
| GET | `/api/status` | å¸¦æœ‰æ¨¡å¼ä¿¡æ¯çš„æœåŠ¡å™¨çŠ¶æ€ |
| POST | `/api/echo` | å›æ˜¾è¯·æ±‚ä½“ |
| GET | `/users/:id` | ç”¨æˆ·ä¿¡æ¯ |
| GET | `/health` | å¥åº·æ£€æŸ¥ï¼ˆå®‰å…¨æ¨¡å¼ï¼‰ |
| POST | `/upload` | æ–‡ä»¶ä¸Šä¼ ï¼ˆå®‰å…¨æ¨¡å¼ï¼‰ |
| GET | `/admin` | ç®¡ç†é¢æ¿ï¼ˆå®‰å…¨æ¨¡å¼ï¼Œéœ€è¦è®¤è¯ï¼‰ |

### REST API ç«¯ç‚¹

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|--------|------|-------------|
| GET | `/api/v1/users` | åˆ—å‡ºæ‰€æœ‰ç”¨æˆ· |
| GET | `/api/v1/users/:id` | é€šè¿‡ ID è·å–ç”¨æˆ· |
| POST | `/api/v1/users` | åˆ›å»ºæ–°ç”¨æˆ· |
| PUT | `/api/v1/users/:id` | æ›´æ–°ç”¨æˆ· |
| DELETE | `/api/v1/users/:id` | åˆ é™¤ç”¨æˆ· |

## ğŸ§ª æµ‹è¯•ç¤ºä¾‹

æˆ‘ä»¬æä¾›å…¨é¢çš„æµ‹è¯•è„šæœ¬ï¼Œå¸®åŠ©æ‚¨æ¢ç´¢å’ŒéªŒè¯ç¤ºä¾‹ï¼š

### è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬

```bash
# æµ‹è¯•åŸºç¡€æœåŠ¡å™¨ï¼ˆç¡®ä¿å®ƒå·²ç»åœ¨è¿è¡Œï¼‰
./scripts/test_basic.sh

# æµ‹è¯• REST API æœåŠ¡å™¨ï¼ˆç¡®ä¿å®ƒå·²ç»åœ¨è¿è¡Œï¼‰
./scripts/test_api.sh

# è¿è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•
./scripts/benchmark.sh all
```

### æ‰‹åŠ¨æµ‹è¯•

#### åŸºç¡€æœåŠ¡å™¨æµ‹è¯•
```bash
# çŠ¶æ€æ£€æŸ¥
curl http://127.0.0.1:3000/api/status

# ä¸ªæ€§åŒ–é—®å€™
curl http://127.0.0.1:3000/hello/world

# å›æ˜¾æµ‹è¯•
curl -X POST -H "Content-Type: application/json" \
     -d '{"message":"Hello H3z!"}' \
     http://127.0.0.1:3000/api/echo

# ç”¨æˆ·ç«¯ç‚¹
curl http://127.0.0.1:3000/users/123

# è®¡ç®—å™¨ç«¯ç‚¹
curl -X POST -H "Content-Type: application/json" \
     -d '{"a":10,"b":5,"op":"add"}' \
     http://127.0.0.1:3000/api/calculate
```

#### å¤šæ¨¡å¼æœåŠ¡å™¨æµ‹è¯•
```bash
# æµ‹è¯•åŸºæœ¬æ¨¡å¼
curl http://127.0.0.1:3000/api/status

# æµ‹è¯•å®‰å…¨æ¨¡å¼ï¼ˆä¸åŒç«¯å£ï¼‰
curl http://127.0.0.1:3001/health
curl http://127.0.0.1:3001/config

# æµ‹è¯•å¼€å‘æ¨¡å¼
curl http://127.0.0.1:3002/debug
```

#### é«˜çº§è·¯ç”±æµ‹è¯•
```bash
# å‚æ•°è·¯ç”±
curl http://127.0.0.1:3000/users/123
curl http://127.0.0.1:3000/users/123/posts/456

# æŸ¥è¯¢å‚æ•°
curl "http://127.0.0.1:3000/search?q=test&page=1"

# é€šé…ç¬¦è·¯ç”±
curl http://127.0.0.1:3000/static/css/style.css

# æ–‡ä»¶ä¸Šä¼ 
curl -X POST -F "file=@example.txt" http://127.0.0.1:3000/upload

# éœ€è¦èº«ä»½éªŒè¯
curl -H "Authorization: Bearer valid-token-123" \
     http://127.0.0.1:3000/protected
```

#### REST API æµ‹è¯•
```bash
# ç”¨æˆ· CRUD
curl http://127.0.0.1:3000/api/v1/users
curl -X POST -H "Content-Type: application/json" \
     -d '{"name":"John Doe","email":"john@example.com"}' \
     http://127.0.0.1:3000/api/v1/users
curl -X PUT -H "Content-Type: application/json" \
     -d '{"name":"John Updated"}' \
     http://127.0.0.1:3000/api/v1/users/1
curl -X DELETE http://127.0.0.1:3000/api/v1/users/1

# äº§å“ CRUD
curl http://127.0.0.1:3000/api/v1/products
curl -X POST -H "Content-Type: application/json" \
     -d '{"name":"Widget","price":29.99,"category":"tools"}' \
     http://127.0.0.1:3000/api/v1/products

# è®¢å• CRUD
curl http://127.0.0.1:3000/api/v1/orders
curl -X POST -H "Content-Type: application/json" \
     -d '{"user_id":1,"product_id":1,"quantity":2}' \
     http://127.0.0.1:3000/api/v1/orders

# ç»Ÿè®¡
curl http://127.0.0.1:3000/api/v1/stats
```

#### ä¸­é—´ä»¶æµ‹è¯•
```bash
# æµ‹è¯•ä¸­é—´ä»¶æ ˆ
curl -v http://127.0.0.1:3000/api/middleware-info

# æµ‹è¯•è®¡æ—¶ä¸­é—´ä»¶
curl http://127.0.0.1:3000/api/timing

# æµ‹è¯•èº«ä»½éªŒè¯ä¸­é—´ä»¶
curl -H "Authorization: Bearer valid-token-123" \
     http://127.0.0.1:3000/auth-required

# æµ‹è¯•éªŒè¯ä¸­é—´ä»¶
curl -X POST -H "Content-Type: application/json" \
     -d '{"test":"data"}' \
     http://127.0.0.1:3000/api/validated
```

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

å®‰å…¨æ¨¡å¼å±•ç¤ºäº†ï¼š

- **CORS ä¿æŠ¤**ï¼šå¯é…ç½®çš„è·¨æºèµ„æºå…±äº«
- **å®‰å…¨å¤´**ï¼šX-Frame-Optionsã€X-Content-Type-Options ç­‰
- **è¯·æ±‚éªŒè¯**ï¼šè¾“å…¥éªŒè¯å’Œå‡€åŒ–
- **èº«ä»½éªŒè¯**ï¼šåŸºæœ¬ HTTP èº«ä»½éªŒè¯ç¤ºä¾‹
- **é€Ÿç‡é™åˆ¶**ï¼šè¯·æ±‚é€Ÿç‡é™åˆ¶ï¼ˆè®¡åˆ’ä¸­ï¼‰

## ğŸ”§ ä¸­é—´ä»¶

ç¤ºä¾‹å±•ç¤ºäº†å„ç§ä¸­é—´ä»¶ï¼š

- **æ—¥å¿—ä¸­é—´ä»¶** - è¯·æ±‚/å“åº”æ—¥å¿—è®°å½•
- **CORS ä¸­é—´ä»¶** - è·¨æºèµ„æºå…±äº«
- **å®‰å…¨å¤´ä¸­é—´ä»¶** - å®‰å…¨ç›¸å…³çš„ HTTP å¤´
- **èº«ä»½éªŒè¯ä¸­é—´ä»¶** - ç”¨æˆ·èº«ä»½éªŒè¯
- **é”™è¯¯å¤„ç†ä¸­é—´ä»¶** - é›†ä¸­å¼é”™è¯¯å¤„ç†
- **è‡ªå®šä¹‰ä¸­é—´ä»¶** - æ„å»ºæ‚¨è‡ªå·±çš„ä¸­é—´ä»¶

## ğŸ“ é¡¹ç›®ç»“æ„

```
h3z-examples/
â”œâ”€â”€ build.zig              # æ„å»ºé…ç½®
â”œâ”€â”€ build.zig.zon          # ä¾èµ–ç®¡ç†
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ basic_server.zig   # åŸºç¡€æœåŠ¡å™¨ç¤ºä¾‹
â”‚   â”œâ”€â”€ multi_mode_server.zig # å¤šæ¨¡å¼æœåŠ¡å™¨
â”‚   â”œâ”€â”€ middleware_example.zig # ä¸­é—´ä»¶æ¼”ç¤º
â”‚   â”œâ”€â”€ advanced_routing.zig   # é«˜çº§è·¯ç”±åŠŸèƒ½
â”‚   â”œâ”€â”€ rest_api.zig       # REST API ç¤ºä¾‹
â”‚   â””â”€â”€ tests.zig          # å•å…ƒæµ‹è¯•
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ test_basic.sh      # åŸºç¡€æœåŠ¡å™¨æµ‹è¯•è„šæœ¬
â”‚   â”œâ”€â”€ test_api.sh        # API æµ‹è¯•è„šæœ¬
â”‚   â””â”€â”€ benchmark.sh       # æ€§èƒ½åŸºå‡†æµ‹è¯•
â”œâ”€â”€ LICENSE                # MIT è®¸å¯è¯
â””â”€â”€ README.md              # æœ¬æ–‡ä»¶
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼ä»¥ä¸‹æ˜¯æ‚¨å¯ä»¥å¸®åŠ©çš„æ–¹å¼ï¼š

1. **Fork ä»“åº“**
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**ï¼š`git checkout -b feature/amazing-feature`
3. **æäº¤æ‚¨çš„æ›´æ”¹**ï¼š`git commit -m 'Add amazing feature'`
4. **æ¨é€åˆ°åˆ†æ”¯**ï¼š`git push origin feature/amazing-feature`
5. **æ‰“å¼€æ‹‰å–è¯·æ±‚**

### å¼€å‘æŒ‡å—

- éµå¾ª Zig ç¼–ç çº¦å®š
- ä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•
- æ ¹æ®éœ€è¦æ›´æ–°æ–‡æ¡£
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼š`zig build test`

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸŒŸ è¡¨è¾¾æ”¯æŒ

å¦‚æœè¿™ä¸ªé¡¹ç›®å¸®åŠ©æ‚¨å­¦ä¹ äº† Zig æˆ– H3zï¼Œè¯·ç»™ä¸€ä¸ª â­ï¸ï¼

## ğŸ“± åœ¨çº¿æ¼”ç¤º

æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª GitHub Pages ç½‘ç«™ï¼Œå±•ç¤º H3z æ¡†æ¶çš„ç‰¹æ€§å’Œç¤ºä¾‹ï¼š

- [H3z Examples æ¼”ç¤ºç½‘ç«™](https://dg0230.github.io/h3z-examples/) - æµè§ˆæ¡†æ¶ç‰¹æ€§ã€ç¤ºä¾‹ä»£ç å’Œ API æ–‡æ¡£

åœ¨è¿™ä¸ªæ¼”ç¤ºç½‘ç«™ä¸Šï¼Œæ‚¨å¯ä»¥ï¼š
- äº†è§£ H3z æ¡†æ¶çš„æ ¸å¿ƒç‰¹æ€§
- æŸ¥çœ‹å„ç§ç¤ºä¾‹çš„ä»£ç ç‰‡æ®µ
- æµè§ˆ API ç«¯ç‚¹æ–‡æ¡£
- è·å–å®‰è£…å’Œä½¿ç”¨æŒ‡å—

## ğŸ”— ç›¸å…³é“¾æ¥

- [H3z](https://github.com/Dg0230/h3z) - è½»é‡ã€å¿«é€Ÿä¸”å¯ç»„åˆçš„ HTTP æ¡†æ¶
- [Zig](https://ziglang.org/) - Zig ç¼–ç¨‹è¯­è¨€
- [H3.js](https://h3.dev) - H3z çš„çµæ„Ÿæ¥æº
